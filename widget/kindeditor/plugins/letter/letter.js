var ke_nface;KindEditor.plugin("letter",function(t){{var e=this,l="letter";e.facePath||e.pluginsPath+"letter/images/"}e.clickToolbar(l,function(){function e(){for(var e=letterArray.length,l="",i=0;e>i;i++)i%8==0&&(l+="<ul>"),l+='<li onclick="letterfun.setEdit(this);" title="'+letterArray[i].title+'"><img src="'+letterArray[i].img+'" /><span>'+letterArray[i].table+"</span></li>",(i%8==7||i==e)&&(l+="</ul>");elm=t('<div id="lettermainp"><div id="lettermain" style="margin-left:0px;">'+l+"</div></div>"),c.div.append(elm),c.div.append(t('<div style="width:577px;height:26px;margin:0px 0px px 6px;border-top:1px solid #b9c7d3;clear:both;"><span class="iicon47"   onclick="letterScroll(2);"></span><span class="iicon46"></span><span class="iicon45" onclick="letterScroll(1);"></span></div>'))}function l(){t.each(s,function(){this.unbind()}),$(".letter").remove(),$(".face").remove(),$("body").unbind("click")}var i=5,r=14,a=70,n=i*r,s=(Math.ceil(a/n),Math.floor(r/2),[]),c=t.widget({width:583,x:parseInt($("#mailsend").offset().left)+10,y:parseInt($("#mailsend").offset().top)-230,z:101,centerLineMode:!1,html:'<span class="iicon44"></span><span class="iicon18" onclick="letterfun.hideLetter();"></span><p class="face00"></p>',css:{background:"#ffffff"},cls:"letter",shadowMode:!0,beforeRemove:function(){l()}});e()})});var letterArray=[{title:"不使用信纸",img:"/images/letter/default/1.jpg",table:"<table><tr><td></td></tr></table>"},{title:"经典灰",img:"/images/letter/default/1.jpg",table:'<table><tr><td style="padding:37px 19px 37px 24px;line-height:24px;background-color:#e6e6e7;"></td></tr><tr></tr></table>'},{title:"青葱岁月",img:"/images/letter/letter1/1.jpg",table:"<table><tr><td></td></tr></table>"}],letterfun=new function(){var t=this;t.letterScroll=function(t){var e=$("#lettermain"),l=parseInt(e.css("margin-left").replace("px",""));1==t?(-1166>=l&&(l=583),$("#lettermain").css("margin-left",l-583)):(l>=0&&(l=-1749),$("#lettermain").css("margin-left",l+583))},t.setEdit=function(t){var e=$(editor.html()),l=$($(t).children("span").html()),i="";i=0==e.find("td").length?editor.html():e.find("td").html();var r=l.find("td").attr("style"),a='<table><tr><td style="'+r+'">'+i+"</td></tr></table>";alert(a),editor.html(a)},t.hideLetter=function(){$(".letter").remove()}};