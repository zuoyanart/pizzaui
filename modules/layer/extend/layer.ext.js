define("layer",function(){!function(){layer.use("skin/layer.ext.css",function(){layer.layui_layer_extendlayerextjs=!0});var e=layer.cache||{},a=function(a){return e.skin?" "+e.skin+" "+e.skin+"-"+a:""};layer.prompt=function(e,n){e=e||{},"function"==typeof e&&(n=e);var i,t=2==e.formType?'<textarea class="layui-layer-input">'+(e.value||"")+"</textarea>":function(){return'<input type="'+(1==e.formType?"password":"text")+'" class="layui-layer-input" value="'+(e.value||"")+'">'}();return layer.open($.extend({btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],content:t,skin:"layui-layer-prompt"+a("prompt"),success:function(e){i=e.find(".layui-layer-input"),i.focus()},yes:function(a){var t=i.val();""===t?i.focus():t.length>(e.maxlength||500)?layer.tips("&#x6700;&#x591A;&#x8F93;&#x5165;"+(e.maxlength||500)+"&#x4E2A;&#x5B57;&#x6570;",i,{tips:1}):n&&n(t,a,i)}},e))},layer.tab=function(e){e=e||{};var n=e.tab||{};return layer.open($.extend({type:1,skin:"layui-layer-tab"+a("tab"),title:function(){var e=n.length,a=1,i="";if(e>0)for(i='<span class="layui-layer-tabnow">'+n[0].title+"</span>";e>a;a++)i+="<span>"+n[a].title+"</span>";return i}(),content:'<ul class="layui-layer-tabmain">'+function(){var e=n.length,a=1,i="";if(e>0)for(i='<li class="layui-layer-tabli xubox_tab_layer">'+(n[0].content||"no content")+"</li>";e>a;a++)i+='<li class="layui-layer-tabli">'+(n[a].content||"no  content")+"</li>";return i}()+"</ul>",success:function(e){var a=e.find(".layui-layer-title").children(),n=e.find(".layui-layer-tabmain").children();a.on("mousedown",function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0;var a=$(this),i=a.index();a.addClass("layui-layer-tabnow").siblings().removeClass("layui-layer-tabnow"),n.eq(i).show().siblings().hide()})}},e))},layer.photos=function(e,n,i){function t(e,a,n){var i=new Image;i.onload=function(){i.onload=null,a(i)},i.onerror=function(e){i.onerror=null,n(e)},i.src=e}var l={};if(e=e||{},e.photos){var r=e.photos.constructor===Object,o=r?e.photos:{},s=o.data||[],u=o.start||0;if(l.imgIndex=u+1,r){if(0===s.length)return void layer.msg("&#x6CA1;&#x6709;&#x56FE;&#x7247;")}else{var c=$(e.photos),y=c.find(e.img||"img");if(0===y.length)return;if(n||c.find(o.img||"img").each(function(a){var n=$(this);s.push({alt:n.attr("alt"),pid:n.attr("layer-pid"),src:n.attr("layer-src")||n.attr("src"),thumb:n.attr("src")}),n.on("click",function(){layer.photos($.extend(e,{photos:{start:a,data:s,tab:e.tab},full:e.full}),!0)})}),!n)return}l.imgprev=function(e){l.imgIndex--,l.imgIndex<1&&(l.imgIndex=s.length),l.tabimg(e)},l.imgnext=function(e,a){l.imgIndex++,l.imgIndex>s.length&&(l.imgIndex=1,a)||l.tabimg(e)},l.keyup=function(e){if(!l.end){var a=e.keyCode;e.preventDefault(),37===a?l.imgprev(!0):39===a?l.imgnext(!0):27===a&&layer.close(l.index)}},l.tabimg=function(a){s.length<=1||(o.start=l.imgIndex-1,layer.close(l.index),layer.photos(e,!0,a))},l.event=function(){l.bigimg.hover(function(){l.imgsee.show()},function(){l.imgsee.hide()}),l.bigimg.find(".layui-layer-imgprev").on("click",function(e){e.preventDefault(),l.imgprev()}),l.bigimg.find(".layui-layer-imgnext").on("click",function(e){e.preventDefault(),l.imgnext()}),$(document).on("keyup",l.keyup)},l.loadi=layer.load(1,{shade:"shade"in e?!1:.9,scrollbar:!1}),t(s[u].src,function(n){layer.close(l.loadi),l.index=layer.open($.extend({type:1,area:function(){var a=[n.width,n.height],i=[$(window).width()-100,$(window).height()-100];return!e.full&&a[0]>i[0]&&(a[0]=i[0],a[1]=a[0]*i[1]/a[0]),[a[0]+"px",a[1]+"px"]}(),title:!1,shade:.9,shadeClose:!0,closeBtn:!1,move:".layui-layer-phimg img",moveType:1,scrollbar:!1,moveOut:!0,shift:5*Math.random()|0,skin:"layui-layer-photos"+a("photos"),content:'<div class="layui-layer-phimg"><img src="'+s[u].src+'" alt="'+(s[u].alt||"")+'" layer-pid="'+s[u].pid+'"><div class="layui-layer-imgsee">'+(s.length>1?'<span class="layui-layer-imguide"><a href="javascript:;" class="layui-layer-iconext layui-layer-imgprev"></a><a href="javascript:;" class="layui-layer-iconext layui-layer-imgnext"></a></span>':"")+'<div class="layui-layer-imgbar" style="display:'+(i?"block":"")+'"><span class="layui-layer-imgtit"><a href="javascript:;">'+(s[u].alt||"")+"</a><em>"+l.imgIndex+"/"+s.length+"</em></span></div></div></div>",success:function(a){l.bigimg=a.find(".layui-layer-phimg"),l.imgsee=a.find(".layui-layer-imguide,.layui-layer-imgbar"),l.event(a),e.tab&&e.tab(s[u],a)},end:function(){l.end=!0,$(document).off("keyup",l.keyup)}},e))},function(){layer.close(l.loadi),layer.msg("&#x5F53;&#x524D;&#x56FE;&#x7247;&#x5730;&#x5740;&#x5F02;&#x5E38;<br>&#x662F;&#x5426;&#x7EE7;&#x7EED;&#x67E5;&#x770B;&#x4E0B;&#x4E00;&#x5F20;&#xFF1F;",{time:3e4,btn:["下一张","不看了"],yes:function(){s.length>1&&l.imgnext(!0,!0)}})})}}}()});